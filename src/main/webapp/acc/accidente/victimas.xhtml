<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:f="http://xmlns.jcp.org/jsf/core" >

    <div jsf:id="victimas" class="ui-g">
        <div class="ui-g-12 ui-md-12 ui-lg-12">
            <p:panel id="param-victima"
                     rendered="#{accidenteVictimaJSF.accidenteVictima != null}"
                     style="padding: 0;margin: 0;border:0">
                <div class="ui-g-12 ui-md-12 ui-lg-4">
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0">
                        <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3">
                            <p:outputLabel value="Código Tm Operador: " />
                        </div>
                        <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3" >
                            <p:inputText id="inp-bus-ope"
                                         value="#{accidenteVictimaJSF.i_codigoOpe}"
                                         >
                                <p:keyFilter regEx="/[0-9]/i"/> 
                            </p:inputText>
                            <div class="botonFloat" >
                                <p:commandButton id="operador-vic"
                                                 icon="fa fa-search"
                                                 process="@this,inp-bus-ope"
                                                 update="param-victima,accidente-form:msg"
                                                 actionListener="#{accidenteVictimaJSF.buscarOperador()}"
                                                 title="Buscar"
                                                 class="cssWhite OrangeButton" />
                            </div>
                        </div>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3">
                        <p:outputLabel value="Identificación:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3">
                        <p:inputText id="vic-cedula" 
                                     value="#{accidenteVictimaJSF.accidenteVictima.cedula}"
                                     />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3">
                        <p:outputLabel value="Nombres:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3">
                        <p:inputText id="vic-nombres" 
                                     required="true"
                                     requiredMessage="Nombre es requerido"
                                     value="#{accidenteVictimaJSF.accidenteVictima.nombres}"
                                     maxlength="150" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3">
                        <p:outputLabel value="Apellidos:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3">
                        <p:inputText id="vic-apellidos" 
                                     value="#{accidenteVictimaJSF.accidenteVictima.apellidos}"
                                     maxlength="150" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3">
                        <p:outputLabel value="Tel. Fijo:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3">
                        <p:inputText id="vic-telefono" 
                                     value="#{accidenteVictimaJSF.accidenteVictima.telefono}"
                                     maxlength="45" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3">
                        <p:outputLabel value="Celular:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3">
                        <p:inputText id="vic-celular" 
                                     value="#{accidenteVictimaJSF.accidenteVictima.celular}"
                                     maxlength="45" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3">
                        <p:outputLabel value="Dirección:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3">
                        <p:inputText id="vic-dir" 
                                     value="#{accidenteVictimaJSF.accidenteVictima.direccion}"
                                     maxlength="150"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3" jsf:rendered="false">
                        <p:outputLabel value="Genero:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3" jsf:rendered="false">
                        <p:selectOneMenu id="vic-genero" value="#{accidenteVictimaJSF.accidenteVictima.genero}" style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItem itemLabel="Masculino" itemValue="H" />
                            <f:selectItem itemLabel="Femenino" itemValue="M" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3" jsf:rendered="false">
                        <p:outputLabel value="Estrato:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3" jsf:rendered="false">
                        <p:selectOneMenu id="vic-estrato" value="#{accidenteVictimaJSF.accidenteVictima.estrato}" style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItem itemLabel="Uno" itemValue="1" />
                            <f:selectItem itemLabel="Dos" itemValue="2" />
                            <f:selectItem itemLabel="Tres" itemValue="3" />
                            <f:selectItem itemLabel="Cuatro" itemValue="4" />
                            <f:selectItem itemLabel="Cinco" itemValue="5" />
                            <f:selectItem itemLabel="Seis" itemValue="6" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3">
                        <p:outputLabel value="Edad (AÑOS):" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3">
                        <p:selectOneMenu id="vic-edad" value="#{accidenteVictimaJSF.i_idAccRangoEdad}" 
                                         style="width: 99.999%" filter="true" filterMatchMode="contains">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItems value="#{accRangoEdadJSF.listAccRangoEdad}" 
                                           var="accRango" 
                                           itemLabel="#{accRango.rangoEdad}" 
                                           itemDescription="#{accRango.descripcion}"
                                           itemValue="#{accRango.idAccRangoEdad}" />
                        </p:selectOneMenu>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-4">
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3" jsf:rendered="false">
                        <p:outputLabel value="Fecha de Nac:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3" jsf:rendered="false">
                        <p:calendar id="vic-fecha-nacimiento" 
                                    value="#{accidenteVictimaJSF.accidenteVictima.fechaNcto}" 
                                    locale="es"
                                    maxdate="today"
                                    showOn="button"
                                    navigator="true"
                                    pattern="yyyy-MM-dd" 
                                    mask="true" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3" jsf:rendered="false">
                        <p:outputLabel value="EPS:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3" jsf:rendered="false">
                        <p:selectOneMenu id="vic-eps" value="#{accidenteVictimaJSF.i_idAccEps}" 
                                         style="width: 99.999%" filter="true" filterMatchMode="contains">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItems value="#{accEpsJSF.listAccEps}" 
                                           var="accEps" 
                                           itemLabel="#{accEps.eps}" 
                                           itemDescription="#{accEps.descripcion}"
                                           itemValue="#{accEps.idAccEps}" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3" jsf:rendered="false">
                        <p:outputLabel value="Profesión:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3" jsf:rendered="false">
                        <p:selectOneMenu id="vic-profesion" value="#{accidenteVictimaJSF.i_idAccProfesion}" 
                                         style="width: 99.999%" filter="true" filterMatchMode="contains">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItems value="#{accProfesionJSF.listAccProfesion}" 
                                           var="accProf" 
                                           itemLabel="#{accProf.profesion}" 
                                           itemDescription="#{accProf.descripcion}"
                                           itemValue="#{accProf.idAccProfesion}" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3">
                        <p:outputLabel value="Vehículo:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3">
                        <p:selectOneMenu id="vic-vehiculo" value="#{accidenteVictimaJSF.i_idAccidenteVehiculo}" style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItems value="#{accidenteVictimaJSF.listAccidenteVehiculo}" 
                                           var="accVeh" 
                                           itemLabel="Cod: #{accVeh.codigoVehiculo} / Pla: #{accVeh.placa}" 
                                           itemDescription="Placa: #{accVeh.placa}"
                                           itemValue="#{accVeh.idAccidenteVehiculo}" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3" jsf:rendered="false">
                        <p:outputLabel value="Condición:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3" jsf:rendered="false">
                        <p:selectOneMenu id="vic-cond" value="#{accidenteVictimaJSF.i_idAccCondicion}" style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItems value="#{accCondicionJSF.listAccCondicion}" 
                                           var="accCond" 
                                           itemLabel="#{accCond.condicion}" 
                                           itemDescription="#{accCond.descripcion}"
                                           itemValue="#{accCond.idAccCondicion}" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3" jsf:rendered="false">
                        <p:outputLabel value="C. asistencial:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3" jsf:rendered="false">
                        <p:inputText id="vic-centro-asistencial"
                                     value="#{accidenteVictimaJSF.accidenteVictima.centroAsistencial}" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3">
                        <p:outputLabel value="Conciliado:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3">
                        <p:selectOneMenu id="vic-conciliado" value="#{accidenteVictimaJSF.accidenteVictima.conciliado}" style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItem itemLabel="Conciliado" itemValue="1" />
                            <f:selectItem itemLabel="No Conciliado" itemValue="0" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3">
                        <p:outputLabel value="Conciliado $" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3">
                        <p:inputText id="vic-cond-pesos"
                                     value="#{accidenteVictimaJSF.accidenteVictima.vrConciliado}" 
                                   >
                            <p:keyFilter regEx="/[0-9]/i"/>  
                        </p:inputText>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-5 Padding3" jsf:rendered="false">
                        <p:outputLabel value="Conciliado doc." />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-7 Padding3" jsf:rendered="false">
                        <p:commandButton id="vic-doc-cargar"
                                         value="Cargar" 
                                         type="button" 
                                         icon="fa fa-arrow-circle-o-up"
                                         class="cssWhite"
                                         onclick="PF('soporteConciliacionDlg').show();" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3">
                        <p:outputLabel value="Lesiones:"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3">
                        <p:inputTextarea id="vic-lesion"
                                         value="#{accidenteVictimaJSF.accidenteVictima.lesiones}"
                                         rows="7"
                                         maxlength="65000"
                                         autoResize="false"/>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-4">

                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3">
                        <p:outputLabel value="Versión:"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3">
                        <p:inputTextarea id="vic-version"
                                         value="#{accidenteVictimaJSF.accidenteVictima.version}"
                                         rows="7"
                                         maxlength="65000"
                                         autoResize="false"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3" jsf:rendered="false">
                        <p:outputLabel value="* Observación:"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3" jsf:rendered="false">
                        <p:inputTextarea id="vic-obser"
                                         value="#{accidenteVictimaJSF.accidenteVictima.observacion}"
                                         required="true"
                                         requiredMessage="Observación es requerido"
                                         rows="7"
                                         maxlength="65000"
                                         autoResize="false"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0">
                        <div class="ui-g-6 ui-md-6 ui-lg-6 Padding3">
                            <p:commandButton id="vic-guardar"
                                             value="Guardar"
                                             process="@this,@form"
                                             update="@form,accidente-form:msg"
                                             actionListener="#{accidenteVictimaJSF.guardar()}"
                                             rendered="#{accidenteVictimaJSF.b_flag}"
                                             icon="fa fa-check"
                                             class="cssWhite GreenButton" />
                            <p:commandButton id="vic-actualizar"
                                             value="Actualizar"
                                             process="@this,@form"
                                             update="@form,accidente-form:msg"
                                             actionListener="#{accidenteVictimaJSF.editar()}"
                                             rendered="#{!accidenteVictimaJSF.b_flag}"
                                             icon="fa fa-check"
                                             class="cssWhite GreenButton" />
                        </div>
                        <div class="ui-g-6 ui-md-6 ui-lg-6 Padding3">
                            <p:commandButton id="vic-cancel"
                                             value="Cancelar"
                                             process="@this"
                                             update="@form"
                                             actionListener="#{accidenteVictimaJSF.reset()}"
                                             icon="fa fa-times"
                                             class="cssWhite" />
                        </div>
                    </div>
                </div>
            </p:panel>
        </div>
        <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0">
            <div class="ui-g-9 ui-md-9 ui-lg-9 Padding3"></div>
            <div class="ui-g-3 ui-md-3 ui-lg-3 Padding3" jsf:rendered="#{!accidenteJSF.isRolAbogado}">
                <p:commandButton id="nuevo-victima" 
                                 value="Nuevo"
                                 actionListener="#{accidenteVictimaJSF.prepareGuardar()}"
                                 rendered="#{accidenteVictimaJSF.b_flag}"
                                 class="cssWhite"
                                 update="@form"
                                 process="@this"
                                 style="float:right" 
                                 icon="fa fa-plus" />
            </div>
        </div>
        <div class="ui-g-12 ui-md-12 ui-lg-12" jsf:id="vic-data-tabla">
            <p:dataTable id="vic-tabla"
                         value="#{accidenteVictimaJSF.listAccidenteVictima}"
                         var="items"
                         rowIndexVar="numIndex"
                         rows="5"
                         rowsPerPageTemplate="5,10,20"
                         paginator="true"
                         reflow="true"
                         scrollable="true"
                         scrollHeight="500">

                <p:column headerText="#" style="width: 40px">
                    <p:outputLabel value="#{numIndex+1}"/>
                </p:column>
                <p:column headerText="Nombre" class="TexAlCenter">
                    <p:outputLabel value="#{items.nombres}"/>
                </p:column>
                <p:column headerText="Apellido" class="TexAlCenter">
                    <p:outputLabel value="#{items.apellidos}"/>
                </p:column>
                <p:column headerText="Identificación" class="TexAlCenter">
                    <p:outputLabel value="#{items.cedula}"/>
                </p:column>
                <p:column headerText="EPS" rendered="false">
                    <p:outputLabel value="#{items.idAccEps.eps}"/>
                </p:column>
                <p:column headerText="Condición" rendered="false" exportable="false">
                    <p:outputLabel value="#{items.idAccCondicion.condicion}"/>
                </p:column>
                <p:column headerText="Conciliado" class="TexAlCenter">
                    <p:outputLabel value="#{items.conciliado == 1 ? 'Conciliado' : 'No conciliado'}"/>
                </p:column>
                <p:column headerText="Valor Conciliado" visible="false" class="TexAlCenter">
                    <p:outputLabel value="#{items.vrConciliado}"/>
                </p:column>
                <p:column headerText="Télefono fijo/Celular" class="TexAlCenter">
                    <p:outputLabel value="#{items.telefono} / #{items.celular}"/>
                </p:column>
                <p:column headerText="Vehículo" class="TexAlCenter">
                    <p:outputLabel value="#{items.idAccidenteVehiculo.placa}"/>
                </p:column>
                <p:column headerText="Acciones" exportable="false">
                    <div class="ui-g" jsf:rendered="#{!accidenteJSF.isRolAbogado}">
                        <div class="ui-g-3 ui-md-3 ui-lg-3" style="text-align: center" jsf:rendered="false">
                            <p:commandButton id="view"
                                             icon="fa fa-eye"
                                             class="cssWhite"
                                             title="Visualizar Documento"
                                             process="@this"
                                             rendered="#{not empty items.pathSoporteConciliacion}"
                                             update="tabView:form-doc-conciliacion"
                                             actionListener="#{accidenteVictimaJSF.prepDownloadLocal(items.pathSoporteConciliacion)}"
                                             oncomplete="PF('vistaDocConDlg').show();">
                            </p:commandButton>
                        </div>
                        <div class="ui-g-3 ui-md-3 ui-lg-3" style="text-align: center" jsf:rendered="false">
                            <p:commandButton id="descargar-doc" 
                                             title="Descargar Documento" 
                                             ajax="false"
                                             rendered="#{not empty items.pathSoporteConciliacion}"
                                             actionListener="#{accidenteVictimaJSF.prepDownloadLocal(items.pathSoporteConciliacion)}"
                                             class="cssWhite GreenButton"
                                             icon="fa fa-arrow-circle-o-down">
                                <p:fileDownload value="#{accidenteVictimaJSF.fileDown}" />
                            </p:commandButton> 
                        </div>
                        <div class="ui-g-3 ui-md-3 ui-lg-3" style="text-align: center">
                            <p:commandButton id="vic-editar"
                                             title="Editar de la lista"
                                             process="@this"
                                             update="@form"
                                             actionListener="#{accidenteVictimaJSF.prepareEditar(items)}"
                                             class="cssWhite OrangeButton"
                                             icon="fa fa-pencil" />
                        </div>
                        <div class="ui-g-3 ui-md-3 ui-lg-3" style="text-align: center">
                            <p:commandButton id="vic-eliminar"
                                             title="Eliminar de la lista"
                                             process="@this"
                                             update="@form,:accidente-form:msg"
                                             actionListener="#{accidenteVictimaJSF.eliminarLista(items)}"
                                             class="cssWhite RedButton"
                                             icon="fa fa-trash" >
                                <p:confirm header="Confirmación" message="Seguro de quitar este registro de victima?" 
                                           icon="fa fa-exclamation-triangle" />
                            </p:commandButton>
                        </div>
                    </div>
                </p:column>
                <f:facet name="paginatorTopRight">
                    <h:commandLink>
                        <img src="../../resources/img/excel.png" title="Exportar en formato Excel"
                             alt="excel" style="width: 24px;height: 24px"/>
                        <p:dataExporter type="xlsx" target="vic-tabla" fileName="victimas involucrados #{now}" />
                    </h:commandLink>
                </f:facet>
            </p:dataTable>
        </div>
    </div>
</ui:composition>  
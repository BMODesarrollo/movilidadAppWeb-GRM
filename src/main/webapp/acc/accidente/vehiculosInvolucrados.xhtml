<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <div jsf:id="vehiculo-involucrado" class="ui-g">
        <div class="ui-g-12 ui-md-12 ui-lg-12">
            <p:panel id="panel-registro-vehiculo-involucrado"
                     rendered="#{accidenteVehiculoJSF.accidenteVehiculo != null}"
                     style="padding: 0;margin: 0;border:0">
                <div class="ui-g-12 ui-md-12 ui-lg-4 Padding0">
                    <div class="ui-g-12 ui-md-12 ui-lg-12" style="text-align: center">
                        <img src="../../resources/img/bus.png" alt="" style="width: 67%"/>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-8 Padding0" jsf:id="carac-vehiculo">
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0" >
                        <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                            <p:outputLabel value="Código del Vehículo" />
                        </div>
                        <div class="ui-g-12 ui-md-12 ui-lg-6 Padding0" >
                            <p:inputText id="bus-cod-vehiculo"
                                         class="cssBlack"
                                         value="#{accidenteVehiculoJSF.c_codigoVehiculo}"
                                        />
                            <div class="botonFloat" >
                                <p:commandButton id="buscar-vehiculo"
                                                 icon="fa fa-search"
                                                 title="Buscar"
                                                 actionListener="#{accidenteVehiculoJSF.buscarVehiculo()}"
                                                 process="bus-cod-vehiculo,@this"
                                                 update="carac-vehiculo,accidente-form:msg"
                                                 class="cssWhite OrangeButton" />
                            </div>
                        </div>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:outputLabel value="* Num. Vehículo:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:selectOneMenu id="n-vehiculo"
                                         value="#{accidenteVehiculoJSF.accidenteVehiculo.nroVehiculos}"
                                         required="true"
                                         requiredMessage="Num. Vehpiculo es requrido" 
                                         style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItem itemLabel="Uno" itemValue="1" />
                            <f:selectItem itemLabel="Dos" itemValue="2" />
                            <f:selectItem itemLabel="Tres" itemValue="3" />
                            <f:selectItem itemLabel="Cuatro" itemValue="4" />
                            <f:selectItem itemLabel="Cinco" itemValue="5" />
                            <f:selectItem itemLabel="Seis" itemValue="6" />
                            <f:selectItem itemLabel="Siete" itemValue="7" />
                            <f:selectItem itemLabel="Ocho" itemValue="8" />
                            <f:selectItem itemLabel="Nueve" itemValue="9" />
                            <f:selectItem itemLabel="Diez" itemValue="10" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:outputLabel value="* Tipo Vehículo:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:selectOneMenu id="t-vehiculo" 
                                         value="#{accidenteVehiculoJSF.i_idAccTipoVehiculo}" 
                                         required="true"
                                         requiredMessage="Tipo Vehículo es requrido"
                                         style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItems value="#{accTipoVehiculoJSF.listAccTipoVehiculo}" 
                                           var="tpVeh" 
                                           itemLabel="#{tpVeh.tipoVehiculo}" 
                                           itemDescription="#{tpVeh.descripcion}"
                                           itemValue="#{tpVeh.idAccTipoVehiculo}" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:outputLabel value="Empresa Ope.:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:selectOneMenu id="empresa-ope"
                                         value="#{accidenteVehiculoJSF.i_idAccEmpresaOperadora}" 
                                         style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItems value="#{accEmpresaOperadoraJSF.listAccEmpresaOperadora}" 
                                           var="empOpe" 
                                           itemLabel="#{empOpe.empresaOperadora}" 
                                           itemDescription="#{empOpe.descripcion}"
                                           itemValue="#{empOpe.idAccEmpresaOperadora}" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:outputLabel value="Código del vehículo"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:inputText id="cod-vehiculo" 
                                     value="#{accidenteVehiculoJSF.accidenteVehiculo.codigoVehiculo}" 
                                     />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:outputLabel value="Placa"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:inputText id="placa" 
                                     value="#{accidenteVehiculoJSF.accidenteVehiculo.placa}"
                                     />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:outputLabel value="Marca"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:inputText id="marca" 
                                     value="#{accidenteVehiculoJSF.accidenteVehiculo.marca}"
                                     maxlength="45"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:outputLabel value="Modelo"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:inputNumber id="modelo" 
                                       value="#{accidenteVehiculoJSF.accidenteVehiculo.modelo}"
                                       decimalPlaces="0"
                                       maxValue="9999"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:outputLabel value="Inmovilizado:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:selectOneMenu id="inmovilizado" 
                                         value="#{accidenteVehiculoJSF.i_idAccInmovilizado}" 
                                         style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItems value="#{accInmovilizadoJSF.listAccInmovilizado}" 
                                           var="inmovili" 
                                           itemLabel="#{inmovili.inmovilizado}" 
                                           itemDescription="#{inmovili.descripcion}"
                                           itemValue="#{inmovili.idAccInmovilizado}" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:outputLabel value="Fecha salida inmovil:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:calendar id="fechaSalidaInmovil" 
                                    value="#{accidenteVehiculoJSF.accidenteVehiculo.fechaSalidaInmovilizado}" 
                                    pattern="yyyy/MM/dd"
                                    showOn="button"
                                    locale="es"
                                    navigator="true"
                                    mask="true" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0" jsf:rendered="#{!accidenteJSF.isRolAbogado}">
                        <div class="ui-g-6 ui-md-6 ui-lg-6 Padding3">
                            <p:commandButton id="guardar-veh"
                                             value="Guardar"
                                             icon="fa fa-check"
                                             actionListener="#{accidenteVehiculoJSF.guardar()}"
                                             rendered="#{accidenteVehiculoJSF.b_flag}"
                                             update=":accidente-form:msg,@form,:list-accidente:table-accidente"
                                             process="@form,@this"
                                             class="cssWhite GreenButton" />
                            <p:commandButton id="actualizar-veh"
                                             value="Actualizar"
                                             icon="fa fa-check"
                                             actionListener="#{accidenteVehiculoJSF.editar()}"
                                             rendered="#{!accidenteVehiculoJSF.b_flag}"
                                             update=":accidente-form:msg,@form,:list-accidente:table-accidente"
                                             process="@form,@this"
                                             class="cssWhite GreenButton" />
                        </div>
                        <div class="ui-g-6 ui-md-6 ui-lg-6 Padding3">
                            <p:commandButton id="cancelar-veh"
                                             value="Cancelar"
                                             actionListener="#{accidenteVehiculoJSF.reset()}"
                                             update="@form"
                                             process="@this"
                                             icon="fa fa-times"
                                             class="cssWhite" />
                        </div>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-4 Padding0" jsf:rendered="false" >
                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                        <p:outputLabel value="Observación"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12">
                        <p:inputTextarea id="observacion-veh"
                                         value="#{accidenteVehiculoJSF.accidenteVehiculo.observaccion}"
                                         rows="7"
                                         autoResize="false"
                                         maxlength="65000"/>
                    </div>
                </div>
            </p:panel>
        </div>
        <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0">
            <div class="ui-g-9 ui-md-9 ui-lg-9 Padding3"></div>
            <div class="ui-g-3 ui-md-3 ui-lg-3 Padding3" jsf:rendered="#{!accidenteJSF.isRolAbogado}">
                <p:commandButton id="nuevo-vehiculo-invulucrado" 
                                 value="Nuevo"
                                 actionListener="#{accidenteVehiculoJSF.prepareGuardar()}"
                                 rendered="#{accidenteVehiculoJSF.b_flag}"
                                 class="cssWhite"
                                 process="@this"
                                 update="@form"
                                 icon="fa fa-plus" />
            </div>
        </div>
        <div class="ui-g-12 ui-md-12 ui-lg-12" jsf:id="veh-inv-data-table">
            <p:dataTable id="veh-inv-tabla"
                         value="#{accidenteVehiculoJSF.listAccidenteVehiculo}"
                         var="items"
                         rowIndexVar="indexVar"
                         rows="5"
                         rowsPerPageTemplate="5,10,20"
                         paginator="true"
                         reflow="true"
                         scrollable="true"
                         scrollHeight="500">

                <p:column headerText="Número Vehículo" class="TexAlCenter">
                    <p:outputLabel value="#{indexVar + 1}" />
                </p:column>
                <p:column headerText="Placa" class="TexAlCenter">
                    <p:outputLabel value="#{items.placa}" />
                </p:column>
                <p:column headerText="Código" class="TexAlCenter">
                    <p:outputLabel value="#{items.codigoVehiculo}" />
                </p:column>
                <p:column headerText="Tipo Vehículo" class="TexAlCenter">
                    <p:outputLabel value="#{items.idAccTipoVehiculo.tipoVehiculo}" />
                </p:column>
                
                <p:column headerText="Inmovilizado" class="TexAlCenter">
                    <p:outputLabel value="#{items.idAccInmovilizado.inmovilizado}" />
                </p:column>
                <p:column headerText="Empresa Operadora" class="TexAlCenter">
                    <p:outputLabel value="#{items.idAccEmpresaOperadora.empresaOperadora}" />
                </p:column>
                <p:column headerText="Acciones" exportable="false" rendered="#{!accidenteJSF.isRolAbogado}">
                    <div class="ui-g">
                        <div class="ui-g-6 ui-md-6 ui-lg-6" style="text-align: center">
                            <p:commandButton id="editar"
                                             title="Editar de la lista"
                                             class="cssWhite OrangeButton"
                                             actionListener="#{accidenteVehiculoJSF.prepareEditar(items)}"
                                             process="@this"
                                             update=":accidente-form:msg,@form"
                                             icon="fa fa-pencil" />
                        </div>
                        <div class="ui-g-6 ui-md-6 ui-lg-6" style="text-align: center">
                            <p:commandButton id="eliminar"
                                             title="Eliminar de la lista"
                                             process="@this"
                                             actionListener="#{accidenteVehiculoJSF.eliminarLista(items)}"
                                             class="cssWhite RedButton"
                                             update=":accidente-form:msg,@form"
                                             icon="fa fa-trash" >
                                <p:confirm header="Confirmación" message="Seguro de quitar este registro de vehículo?" 
                                           icon="fa fa-exclamation-triangle" />
                            </p:commandButton>
                        </div>
                    </div>
                </p:column>
                <f:facet name="paginatorTopRight">
                    <h:commandLink>
                        <img src="../../resources/img/excel.png" title="Exportar en formato Excel"
                             alt="excel" style="width: 24px;height: 24px"/>
                        <p:dataExporter type="xlsx" target="veh-inv-tabla" fileName="vehiculos involucrados #{now}" />
                    </h:commandLink>
                </f:facet>
            </p:dataTable>
        </div>
    </div>
</ui:composition>
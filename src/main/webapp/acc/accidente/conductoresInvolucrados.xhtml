<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <div jsf:id="conductores-involucrados" class="ui-g">
        <div class="ui-g-12 ui-md-12 ui-lg-12">
            <p:panel id="panel-registro-conductor-involucrado"
                     rendered="#{accidenteConductorJSF.accidenteConductor != null}"
                     style="padding: 0;margin: 0;border:0">
                <div class="ui-g-12 ui-md-12 ui-lg-4 Padding0">
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3" style="text-align: center">
                        <img src="../../resources/img/user.png" alt="" style="width: 75%"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0" >
                        <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                            <p:outputLabel value="Código Tm Operador: " />
                        </div>
                        <div class="ui-g-12 ui-md-12 ui-lg-6 Padding0" >
                            <p:inputText id="inp-bus-ope"
                                         placeholder="Código Ope."
                                         value="#{accidenteConductorJSF.i_codigoOpe}"
                                         >
                                <p:keyFilter regEx="/[0-9]/i"/> 
                            </p:inputText>
                            <div class="botonFloat" >
                                <p:commandButton id="buscar-operador"
                                                 icon="fa fa-search"
                                                 title="Buscar"
                                                 actionListener="#{accidenteConductorJSF.buscarOperador()}"
                                                 update="param-cond-involucrad,accidente-form:msg"
                                                 process="@this,inp-bus-ope"
                                                 class="cssWhite OrangeButton" />
                            </div>
                        </div>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0">
                        <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3">
                            <p:outputLabel value="* Vehículo:" />
                        </div>
                        <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3">
                            <p:selectOneMenu id="cond-invol-veh"
                                             value="#{accidenteConductorJSF.i_idAccidenteVehiculo}"
                                             required="true" 
                                             requiredMessage="Vehículo es requrido"
                                             style="width: 99.999%">
                                <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                                <f:selectItems value="#{accidenteConductorJSF.listAccidenteVehiculo}" 
                                               var="accVeh" 
                                               itemLabel="#{accVeh.placa}" 
                                               itemDescription="#{accVeh.placa}"
                                               itemValue="#{accVeh.idAccidenteVehiculo}" />
                            </p:selectOneMenu>
                        </div>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-4 Padding0" jsf:id="param-cond-involucrad">
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:outputLabel value="* Cédula:"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3"> 
                        <p:inputText id="cond-inv-cedula" 
                                     value="#{accidenteConductorJSF.accidenteConductor.cedula}" 
                                     required="true" 
                                     requiredMessage="Cédula es requerido" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:outputLabel value="* Nombres:"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:inputText id="cond-inv-nombres" 
                                     value="#{accidenteConductorJSF.accidenteConductor.nombres}" 
                                     maxlength="150"
                                     required="true" 
                                     requiredMessage="Nombres es requerido" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:outputLabel value="* Apellidos:"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:inputText id="cond-inv-apellidos" 
                                     value="#{accidenteConductorJSF.accidenteConductor.apellidos}" 
                                     maxlength="150"
                                     required="true" 
                                     requiredMessage="Apellidos es requerido" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:outputLabel value="Tel. Fijo:"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:inputText id="cond-inv-tel" 
                                     value="#{accidenteConductorJSF.accidenteConductor.telefono}"
                                     maxlength="45" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:outputLabel value="Celular:"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:inputText id="cond-inv-cel" 
                                     value="#{accidenteConductorJSF.accidenteConductor.celular}"
                                     maxlength="45" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:outputLabel value="Dirección:"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3">
                        <p:inputText id="cond-inv-dir" 
                                     value="#{accidenteConductorJSF.accidenteConductor.direccion}" 
                                     maxlength="150"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:outputLabel value="Estrato:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:selectOneMenu id="cond-invol-estrato" value="#{accidenteConductorJSF.accidenteConductor.estrato}" style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItem itemLabel="Uno" itemValue="1" />
                            <f:selectItem itemLabel="Dos" itemValue="2" />
                            <f:selectItem itemLabel="Tres" itemValue="3" />
                            <f:selectItem itemLabel="Cuatro" itemValue="4" />
                            <f:selectItem itemLabel="Cinco" itemValue="5" />
                            <f:selectItem itemLabel="Seis" itemValue="6" />
                        </p:selectOneMenu>                        
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:outputLabel value="Fecha de nacimiento:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:calendar id="v-inv-fech-naci" 
                                    value="#{accidenteConductorJSF.accidenteConductor.fechaNcto}" 
                                    locale="es"
                                    maxdate="today"
                                    showOn="button"
                                    navigator="true"
                                    pattern="yyyy-MM-dd" 
                                    mask="true" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:outputLabel value="* Genero:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:selectOneMenu id="cond-invol-gene" value="#{accidenteConductorJSF.accidenteConductor.genero}" required="true" requiredMessage="Genero es requrido" style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItem itemLabel="Masculino" itemValue="H" />
                            <f:selectItem itemLabel="Femenino" itemValue="M" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:outputLabel value="* Condición:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:selectOneMenu id="cond-invol-cond" value="#{accidenteConductorJSF.i_idAccCondicion}" required="true" requiredMessage="Condición es requrido" style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItems value="#{accCondicionJSF.listAccCondicion}" 
                                           var="accCond" 
                                           itemLabel="#{accCond.condicion}" 
                                           itemDescription="#{accCond.descripcion}"
                                           itemValue="#{accCond.idAccCondicion}" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:outputLabel value="C. asistencia:" title="centro asistencial"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-6 Padding3" jsf:rendered="false">
                        <p:inputText id="v-inv-cent-asist"
                                     value="#{accidenteConductorJSF.accidenteConductor.centroAsistencial}"
                                     maxlength="150"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3">
                        <p:outputLabel value="* Versión:"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3">
                        <p:inputTextarea id="cond-invol-version"
                                         value="#{accidenteConductorJSF.accidenteConductor.version}"
                                         required="true"
                                         requiredMessage="Versión es requerido"
                                         rows="7"
                                         autoResize="false"
                                         maxlength="65000"/>
                    </div>
                </div>
                <div class="ui-g-12 ui-md-12 ui-lg-4 Padding0">
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3">
                        <p:outputLabel value="Víctima:" />
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3">
                        <p:selectOneMenu id="cond-invol-vict" value="#{accidenteConductorJSF.accidenteConductor.victima}" style="width: 99.999%">
                            <f:selectItem itemLabel="Seleccione Uno" itemValue="" />
                            <f:selectItem itemLabel="Sí" itemValue="1" />
                            <f:selectItem itemLabel="No" itemValue="0" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3">
                        <p:outputLabel value="Diagnostico"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding3">
                        <p:inputTextarea id="cond-invol-obser"
                                         value="#{accidenteConductorJSF.accidenteConductor.observacion}"
                                         rows="7"
                                         autoResize="false"
                                         maxlength="65000"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0" jsf:rendered="#{!accidenteJSF.isRolAbogado}">
                        <div class="ui-g-6 ui-md-6 ui-lg-6 Padding3">
                            <p:commandButton id="cond-invol-guardar"
                                             value="Guardar"
                                             process="@form,@this"
                                             update=":msgs,@form,tabView:form-vic"
                                             actionListener="#{accidenteConductorJSF.guardar()}"
                                             rendered="#{accidenteConductorJSF.b_flag}"
                                             icon="fa fa-check"
                                             class="cssWhite GreenButton" />
                            <p:commandButton id="cond-invol-actualizar"
                                             value="Actualizar"
                                             process="@form,@this"
                                             update=":msgs,@form"
                                             actionListener="#{accidenteConductorJSF.editar()}"
                                             rendered="#{!accidenteConductorJSF.b_flag}"
                                             icon="fa fa-check"
                                             class="cssWhite GreenButton" />
                        </div>
                        <div class="ui-g-6 ui-md-6 ui-lg-6 Padding3">
                            <p:commandButton id="cond-invol-cancel"
                                             value="Cancelar"
                                             actionListener="#{accidenteConductorJSF.reset()}"
                                             update="@form"
                                             process="@this"
                                             icon="fa fa-times"
                                             class="cssWhite" />
                        </div>
                    </div>
                </div>
            </p:panel>
        </div>
        <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0">
            <div class="ui-g-9 ui-md-9 ui-lg-9 Padding3"></div>
            <div class="ui-g-3 ui-md-3 ui-lg-3 Padding3" jsf:rendered="#{!accidenteJSF.isRolAbogado}">
                <p:commandButton id="nuevo-conductor-invulucrado" 
                                 value="Nuevo"
                                 actionListener="#{accidenteConductorJSF.prepareGuardar()}"
                                 rendered="#{accidenteConductorJSF.b_flag}"
                                 class="cssWhite"
                                 process="@this"
                                 update="@form"
                                 icon="fa fa-plus" />
            </div>
        </div>
        <div class="ui-g-12 ui-md-12 ui-lg-12" jsf:id="cond-invol-data-tabla">
            <p:dataTable id="cond-invol-tabla"
                         value="#{accidenteConductorJSF.listAccidenteConductor}"
                         rows="5"
                         var="items"
                         rowIndexVar="numRow"
                         rowsPerPageTemplate="5,10,20"
                         paginator="true"
                         reflow="true"
                         scrollable="true"
                         scrollHeight="500">
                <p:column headerText="#" style="width: 40px" class="TexAlCenter">
                    <p:outputLabel value="#{numRow+1}" />
                </p:column>
                <p:column headerText="Nombre" class="TexAlCenter">
                    <p:outputLabel value="#{items.nombres}" />
                </p:column>
                <p:column headerText="Apellidos" class="TexAlCenter">
                    <p:outputLabel value="#{items.apellidos}" />
                </p:column>
                <p:column headerText="Condición" rendered="false" exportable="false">
                    <p:outputLabel value="#{items.idAccCondicion.condicion}" />
                </p:column>
                <p:column headerText="Código" class="TexAlCenter">
                    <p:outputLabel value="#{items.centroAsistencial}" />
                </p:column>
                <p:column headerText="Victima" class="TexAlCenter">
                    <p:outputLabel value="#{items.victima == 1 ? 'SI' : 'NO'}" />
                </p:column>
                <p:column headerText="Diagnostico" visible="false" class="TexAlCenter">
                    <p:outputLabel value="#{items.observacion}" />
                </p:column>
                <p:column headerText="Télefono/Celular" class="TexAlCenter">
                    <p:outputLabel value="#{items.telefono} / #{items.celular}" />
                </p:column>
                <p:column headerText="Tipo de Vehículo" class="TexAlCenter">
                    <p:outputLabel value="#{items.idAccidenteVehiculo.idAccTipoVehiculo.tipoVehiculo}" />
                </p:column>
                <p:column headerText="Vehículo" class="TexAlCenter">
                    <p:outputLabel value="#{items.idAccidenteVehiculo.placa}" />
                </p:column>
                <p:column headerText="Versión" visible="false">
                    <p:outputLabel value="#{items.version}" />
                </p:column>
                <p:column headerText="Acciones" exportable="false">
                    <div class="ui-g" jsf:rendered="#{!accidenteJSF.isRolAbogado}">
                        <div class="ui-g-6 ui-md-6 ui-lg-6" style="text-align: center">
                            <p:commandButton id="cond-invol-editar"
                                             title="Editar de la lista"
                                             actionListener="#{accidenteConductorJSF.prepareEditar(items)}"
                                             class="cssWhite OrangeButton"
                                             process="@this"
                                             update="tabView:form-cond-invol"
                                             icon="fa fa-pencil" />
                        </div>
                        <div class="ui-g-6 ui-md-6 ui-lg-6" style="text-align: center">
                            <p:commandButton id="cond-invol-eliminar"
                                             title="Eliminar de la lista"
                                             class="cssWhite RedButton"
                                             process="@this"
                                             update=":accidente-form,@form"
                                             actionListener="#{accidenteConductorJSF.eliminarLista(items)}"
                                             icon="fa fa-trash" >
                                <p:confirm header="Confirmación" message="Seguro de eliminar este registro de conductor?" 
                                           icon="fa fa-exclamation-triangle" />
                            </p:commandButton>
                        </div>
                    </div>
                </p:column>
                <f:facet name="paginatorTopRight">
                    <h:commandLink>
                        <img src="../../resources/img/excel.png" title="Exportar en formato Excel"
                             alt="excel" style="width: 24px;height: 24px"/>
                        <p:dataExporter type="xlsx" target="cond-invol-tabla" fileName="conductores involucrados #{now}" />
                    </h:commandLink>
                </f:facet>
            </p:dataTable>
        </div>
    </div>
</ui:composition>  
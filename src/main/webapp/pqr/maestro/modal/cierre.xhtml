<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:jsf="http://xmlns.jcp.org/jsf">
    <p:dialog widgetVar="cierre_wv" id="dialog_cierre_id" modal="true" closeOnEscape="true"
              responsive="true" appendTo="@(body)" position="center top"
              class="mr1024_50 mr500_90"
              height="auto" header="Insumo de PQR">
        <h:form id="cierre_form">
            <div class="ui-fluid">
                <p:messages id="messages" showSummary="false" showDetail="true" closable="true">
                    <p:effect type="pulsate" event="load" delay="500" />
                </p:messages>

                <div class="ui-g" >

                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0" style="background-color: #f3f5f7;">
                        <div class="ui-g-12 ui-md-3 ui-lg-3 Padding5" >
                            <p:outputLabel value="Tipo:" style="font-weight: bold"/>
                        </div>
                        <div class="ui-g-12 ui-md-9 ui-lg-9 Padding5" >
                            <p:outputLabel value="#{maestroPqrBean.pqrMaestro.idPqrTipo.nombre}"/>
                        </div>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0" >
                        <div class="ui-g-12 ui-md-3 ui-lg-3 Padding5" >
                            <p:outputLabel value="Clasificación:" style="font-weight: bold"/>
                        </div>
                        <div class="ui-g-12 ui-md-9 ui-lg-9 Padding5" >
                            <p:outputLabel value="#{maestroPqrBean.pqrMaestro.idPqrTipo.idPqrClasificacion.nombre}"/>
                        </div>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0" >
                        <div class="ui-g-12 ui-md-3 ui-lg-3 Padding5" >
                            <p:outputLabel value="Responsable" style="font-weight: bold"/>
                        </div>
                        <div class="ui-g-12 ui-md-9 ui-lg-9 Padding5" >
                            <p:outputLabel value="#{maestroPqrBean.pqrMaestro.idPqrTipo.idPqrResponsable.responsable}"/>
                        </div>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding0" style="background-color: #f3f5f7;">

                        <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5" >
                            <p:outputLabel value="Reporte:" />
                        </div>
                        <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5" >
                            <p:outputLabel value="#{maestroPqrBean.pqrMaestro.reporte}"
                                           styleClass="text-word-wrap"/>
                        </div>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5" >
                        <p:outputLabel for="@next" value="Operador:"/>
                        <p:selectOneMenu id="operador"
                                         style="width: 99.9999%"
                                         filterMatchMode="contains" filter="true"
                                         value="#{maestroPqrBean.i_Operador}">
                            <f:selectItem itemLabel="Seleccione uno" itemValue="#{null}" noSelectionOption="true"/>
                            <f:selectItems value="#{maestroPqrBean.listaEmpleados}"
                                           var="fh" itemLabel="#{fh.identificacion} - #{fh.nombres} #{fh.apellidos} - #{fh.codigoTm}"
                                           itemValue="#{fh.idEmpleado}" />
                        </p:selectOneMenu>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5">
                        <p:fieldset id="id_peticion" toggleable="true" legend="Analisis" collapsed="false">
                            <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5" >
                                <p:outputLabel  value="Analisis:" />
                                <p:inputTextarea id="id_txt_analisis" 
                                                 value="#{maestroPqrBean.pqrMaestro.analisis}"
                                                 />
                            </div>
                        </p:fieldset>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5">
                        <p:fieldset toggleable="true" legend="Agregar Causas" collapsed="true">
                            <div class="ui-g-12 ui-ml-12 ui-lg-12  Padding5">
                                <div class="ui-g-12 ui-ml-12 ui-lg-12 Padding0">
                                    <p:outputLabel for="@next"  value="Causa 1:"/>
                                </div>
                                <div class="ui-g-12 ui-ml-12 ui-lg-12 Padding0">
                                    <p:inputText id="id_causa1" 
                                                 value="#{maestroPqrBean.pqrMaestro.c1}"/>                        
                                </div>
                            </div>
                            <div class="ui-g-12 ui-ml-12 ui-lg-12  Padding5">
                                <div class="ui-g-12 ui-ml-12 ui-lg-12 Padding0">
                                    <p:outputLabel for="@next"  value="Causa 2:"/>
                                </div>
                                <div class="ui-g-12 ui-ml-12 ui-lg-12 Padding0">
                                    <p:inputText id="id_causa2" 
                                                 value="#{maestroPqrBean.pqrMaestro.c2}"/>                        
                                </div>
                            </div>
                            <div class="ui-g-12 ui-ml-12 ui-lg-12  Padding5">
                                <div class="ui-g-12 ui-ml-12 ui-lg-12 Padding0">
                                    <p:outputLabel for="@next"  value="Causa 3:"/>
                                </div>
                                <div class="ui-g-12 ui-ml-12 ui-lg-12 Padding0">
                                    <p:inputText id="id_causa3" 
                                                 value="#{maestroPqrBean.pqrMaestro.c3}"/>                       
                                </div>
                            </div>
                            <div class="ui-g-12 ui-ml-12 ui-lg-12  Padding5">
                                <div class="ui-g-12 ui-ml-12 ui-lg-12 Padding0">
                                    <p:outputLabel for="@next"  value="Causa 4:"/>
                                </div>
                                <div class="ui-g-12 ui-ml-12 ui-lg-12 Padding0">
                                    <p:inputText id="id_causa4" 
                                                 value="#{maestroPqrBean.pqrMaestro.c4}"/>                            
                                </div>
                            </div>
                        </p:fieldset>
                    </div>


                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5">
                        <p:fieldset id="id_acciones" toggleable="true" legend="Agregar Acciones" collapsed="true">
                            <div class="ui-g-12 ui-md-8 ui-lg-8 Padding5">
                                <p:outputLabel value="Responsable 1 :" />
                                <p:inputText value="#{maestroPqrBean.pqrMaestro.ar1}"
                                             autocomplete="off" maxlength="99" >
                                </p:inputText>
                            </div>
                            <div class="ui-g-12 ui-md-4 ui-lg-4 Padding5" >
                                <p:outputLabel  value="Fecha 1:" />
                                <p:calendar id="id_date_acciones1" 
                                            pattern="yyyy/MM/dd" 
                                            locale="es"
                                            title="año/mes/día"
                                            readonlyInput="true"
                                            navigator="true"
                                            showOn="button"
                                            maxdate="today"
                                            value="#{maestroPqrBean.pqrMaestro.af1}">  
                                    <p:ajax event="dateSelect" process="@this"/>
                                </p:calendar>
                            </div>
                            <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5" >
                                <p:outputLabel  value="Actividad 1:" />
                                <p:inputTextarea id="reportefdsfasd1" 
                                                 value="#{maestroPqrBean.pqrMaestro.aa1}"/>
                            </div>

                            <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5" style="border-top: 1px solid #ccc; margin-top: 10px;"></div>
                            <div class="ui-g-12 ui-md-8 ui-lg-8 Padding5">
                                <p:outputLabel value="Responsable 2 :" />
                                <p:inputText value="#{maestroPqrBean.pqrMaestro.ar2}"
                                             autocomplete="off" maxlength="99" >
                                </p:inputText>
                            </div>
                            <div class="ui-g-12 ui-md-4 ui-lg-4 Padding5" >
                                <p:outputLabel  value="Fecha 2:" />
                                <p:calendar id="id_date_acciones2" 
                                            pattern="yyyy/MM/dd" 
                                            locale="es"
                                            title="año/mes/día"
                                            readonlyInput="true"
                                            navigator="true"
                                            showOn="button"
                                            maxdate="today"
                                            value="#{maestroPqrBean.pqrMaestro.af2}">  
                                    <p:ajax event="dateSelect" process="@this"/>
                                </p:calendar>
                            </div>
                            <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5" >
                                <p:outputLabel  value="Actividad 2:" />
                                <p:inputTextarea id="reportefdsfasd2" 
                                                 value="#{maestroPqrBean.pqrMaestro.aa2}"/>
                            </div>

                            <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5" style="border-top: 1px solid #ccc; margin-top: 10px;"></div>

                            <div class="ui-g-12 ui-md-8 ui-lg-8 Padding5">
                                <p:outputLabel value="Responsable 3 :" />
                                <p:inputText value="#{maestroPqrBean.pqrMaestro.ar3}"
                                             autocomplete="off" maxlength="99" >
                                </p:inputText>
                            </div>
                            <div class="ui-g-12 ui-md-4 ui-lg-4 Padding5" >
                                <p:outputLabel  value="Fecha 3:" />
                                <p:calendar id="id_date_acciones3" 
                                            pattern="yyyy/MM/dd" 
                                            locale="es"
                                            title="año/mes/día"
                                            readonlyInput="true"
                                            navigator="true"
                                            showOn="button"
                                            maxdate="today"
                                            value="#{maestroPqrBean.pqrMaestro.af3}">  
                                    <p:ajax event="dateSelect" process="@this"/>
                                </p:calendar>
                            </div>
                            <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5" >
                                <p:outputLabel  value="Actividad 3:" />
                                <p:inputTextarea id="reportefdsfasd3" 
                                                 value="#{maestroPqrBean.pqrMaestro.aa3}"/>
                            </div>

                            <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5" style="border-top: 1px solid #ccc; margin-top: 10px;"></div>
                            <div class="ui-g-12 ui-md-8 ui-lg-8 Padding5">
                                <p:outputLabel value="Responsable 4 :" />
                                <p:inputText value="#{maestroPqrBean.pqrMaestro.ar4}"
                                             autocomplete="off" maxlength="99" >
                                </p:inputText>
                            </div>
                            <div class="ui-g-12 ui-md-4 ui-lg-4 Padding5" >
                                <p:outputLabel  value="Fecha 4:" />
                                <p:calendar id="id_date_acciones4" 
                                            pattern="yyyy/MM/dd" 
                                            locale="es"
                                            title="año/mes/día"
                                            readonlyInput="true"
                                            navigator="true"
                                            showOn="button"
                                            maxdate="today"
                                            value="#{maestroPqrBean.pqrMaestro.af4}">  
                                    <p:ajax event="dateSelect" process="@this"/>
                                </p:calendar>
                            </div>
                            <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5" >
                                <p:outputLabel  value="Actividad 4:" />
                                <p:inputTextarea id="reportefdsfasd4" 
                                                 value="#{maestroPqrBean.pqrMaestro.aa4}"/>
                            </div>

                            <p:separator/>
                        </p:fieldset>
                    </div>
                    <div class="ui-g-12 ui-md-6 ui-lg-6 Padding5" >
                        <p:outputLabel for="@next" value="Causa No Procede:"/>
                        <p:selectOneMenu id="idproceso"
                                         style="width: 99.9999%"
                                         filterMatchMode="contains" filter="true"
                                         value="#{maestroPqrBean.i_PqrProcede}">
                            <f:selectItem itemLabel="Seleccione uno" itemValue="#{null}" noSelectionOption="true"/>
                            <f:selectItems value="#{maestroPqrBean.listaprocedesino}"
                                           var="medio" itemLabel="#{medio.obj_proc_nomb}"
                                           itemDescription="#{medio.obj_proc_nomb}"
                                           itemValue="#{medio.obj_proc_iden}" />
                        </p:selectOneMenu>
                    </div>

                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5">
                        <p:outputLabel for="observacion" value="Observacion de cierre" />
                        <p:inputTextarea id="observacion" 
                                         value="#{maestroPqrBean.pqrMaestro.obsCierre}"/>
                    </div>
                    <div class="ui-g-12 ui-md-12 ui-lg-12 Padding5">
                        <p:fieldset toggleable="true" legend="Agregar documento(s) cierre PQR (IMÁGEN Ó PDF)">
                            <div align="center">
                                <p:fileUpload fileUploadListener="#{maestroPqrBean.handleFileUpload}"
                                              id="archivos"
                                              mode="advanced"
                                              multiple="true" sizeLimit="4000000"
                                              allowTypes="/(\.|\/)(jpg|jpe?g|png|JPG|JPE?G|PNG|pdf|PDF)$/"
                                              update="@this"
                                              sequential="true"
                                              accept=".jpg, .jpeg, .png, .JPG, .JPEG, .PNG,.pdf,.PDF"
                                              process="@this"
                                              uploadLabel="Cargar"    
                                              cancelLabel="Cancelar"
                                              label="Selecionar" 
                                              invalidFileMessage="Debe seleccionar un archivo válido"
                                              invalidSizeMessage="El archivo debe ser máximo de 4mb"/>
                            </div>
                        </p:fieldset>
                    </div>
                </div>
            </div>
            <p:remoteCommand name="rc_cierre" 
                             class="cssWhite"
                             actionListener="#{maestroPqrBean.guardarCierre()}"  
                             value="Guardar" 
                             process="cierre_form"
                             update="msgs,form_novedad_infra:dt_pqr"  >

            </p:remoteCommand>
        </h:form>
        <f:facet name="footer">
            <p:commandButton id="btn_cierre" icon="fa fa-save" value="Guardar" 
                             class="cssWhite" onclick="rc_cierre()"/>
        </f:facet>
    </p:dialog>
</ui:composition>